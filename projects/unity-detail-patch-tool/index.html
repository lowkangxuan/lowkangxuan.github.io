<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Recreating a Detail Patch Tool">
    <meta name="author" content="Kang Xuan">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”§</text></svg>">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <title>Recreating a Detail Patch Tool</title>

    <link rel="stylesheet" href="/css/prism-one-dark.css">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://kit.fontawesome.com/ee932fbf61.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body class="fade-in">
    
<nav class="navbar navbar-expand-sm navbar-light bg-light sticky-top px-4 fw-bold">
    <div class="container">
        <a href="/" class="navbar-brand">Kang Xuan</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse flex-grow-0" id="navbarNavAltMarkup">
        <div class="navbar-nav">
            <a href="/" class="nav-link px-3" aria-label="Home">Home</a>
            <a href="/projects" class="nav-link px-3 active" aria-label="Projects">Projects</a>
            <a href="/contact" class="nav-link px-3" aria-label="Contact Me">Contact</a>
        </div>
        </div>
    </div>
</nav>

<div class="container px-4">
    <div class="main ff-firacode">
        <div class="d-flex flex-column align-items-center mb-5 pt-5">
    <h1 class="project-title text-center pt-4 pb-3">Recreating a Detail Patch Tool</h1>
    <div class="d-flex flex-wrap gap-1 pt-0">
        <span class="tag tag-2022"><a href="/tags/2022/">2022</a></span><span class="tag tag-programming"><a href="/tags/programming/">programming</a></span><span class="tag tag-breakdown"><a href="/tags/breakdown/">breakdown</a></span>
    </div>
</div>
<div class="toc" >
        <ul><li><a href="#introduction">Introduction</a></li><li><a href="#breakdown">Breakdown</a><ul><li><a href="#detailpatch.cs">DetailPatch.cs</a></li><li><a href="#detailinstance.cs">DetailInstance.cs</a></li><li><a href="#detailpalette.cs">DetailPalette.cs</a></li><li><a href="#detailprototype.cs">DetailPrototype.cs</a></li></ul></li><li><a href="#additional-resources">Additional Resources</a></li></ul>
      </div>
<h2 id="introduction" tabindex="-1">Introduction</h2>
<p>After watching <a href="https://www.youtube.com/watch?v=Ww12q6HsmJA">The Art of Outer Wilds</a> video as part of Unity Creator Spotlight, I was intrigued by one of the tools the developers were using, the <mark>Detail Patch</mark> tool.</p>
<p>Essentially, the tool allowed the developers to place a group of foliage variants with a wide range of variety across planet surfaces as fast and easily as possible without needing to manually place or &quot;paint&quot; them onto the surface, which is extremely cumbersome. What's better is that they can easily tweak the variables to place different sets of foliage, as well as saving each variants as a mesh, allowing the developers to reuse them as much as possible.</p>
<h2 id="breakdown" tabindex="-1">Breakdown</h2>
<p>I found some time to challenge myself to recreate the tool as accurate as possible and here is the breakdown on how I did it.</p>
<p>The following scripts are created with its main functionality:</p>
<ul>
<li>hi</li>
</ul>
<h3 id="detailpatch.cs" tabindex="-1">DetailPatch.cs</h3>
<p>Starting off, I created a script named <code>DetailPatch.cs</code>. This is the main script where we will be adding to an existing GameObject in the scene as a component.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span><br><br><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequireComponent</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MeshFilter</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequireComponent</span> <span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MeshRenderer</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DetailPatch</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><br><span class="token punctuation">{</span><br>    <span class="token keyword">public</span> <span class="token class-name">DetailInstance<span class="token punctuation">[</span><span class="token punctuation">]</span></span> instances <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DetailInstance</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">public</span> <span class="token class-name">Vector2</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">0.5f</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">public</span> <span class="token class-name">Quaternion</span> savedRot<span class="token punctuation">;</span><br><br>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> count<span class="token punctuation">;</span><br>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> seed<span class="token punctuation">;</span><br>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> isBaked<span class="token punctuation">;</span><br>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> drawDebugLine<span class="token punctuation">;</span><br><br>    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnValidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>size<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> size<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><br>        <span class="token punctuation">{</span><br>            size <span class="token operator">=</span> Vector2<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>Vector2<span class="token punctuation">.</span>zero<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><br>        <span class="token punctuation">{</span><br>            count <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>I also ensure that the <code>MeshFilter</code> and <code>MeshRenderer</code> components are automatically added to the GameObject by using the <code>RequireComponent</code> attribute, more on these 2 components later on.</p>
<p>To prevent any errors with the distribution of the details, the <code>size</code> and the <code>count</code> variables are made to be always positive.</p>
<h3 id="detailinstance.cs" tabindex="-1">DetailInstance.cs</h3>
<h3 id="detailpalette.cs" tabindex="-1">DetailPalette.cs</h3>
<h3 id="detailprototype.cs" tabindex="-1">DetailPrototype.cs</h3>
<h2 id="additional-resources" tabindex="-1">Additional Resources</h2>
<p><a href="https://docs.unity3d.com/ScriptReference/EditorWindow.html">Unity EditorWindow class</a></p>
<p><a href="https://docs.unity3d.com/ScriptReference/SerializedObject.html">Unity SerializedObject class</a></p>
<p><a href="https://youtu.be/pZ45O2hg_30">Freya HolmÃ©r Intro to Tool Dev in Unity</a></p>

<footer class="project-footer ff-roboto">May 11, 2022</footer>
        <footer class="d-flex justify-content-center gap-4">
            <a href="mailto: lowkangxuan@gmail.com" target="_blank">
                <i class="fa-solid fa-envelope fa-lg"></i>
            </a>
            <a href="https://twitter.com/k4ngg_" target="_blank">
                <i class="fa-brands fa-twitter fa-lg"></i>
            </a>
            <a href="https://github.com/lowkangxuan" target="_blank">
                <i class="fa-brands fa-github fa-lg"></i>
            </a>
            <a href="https://www.linkedin.com/in/low-kang-xuan-0305061a9/" target="_blank">
                <i class="fa-brands fa-linkedin fa-lg"></i>
            </a>
        </footer>
    </div>
</div>
    
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>