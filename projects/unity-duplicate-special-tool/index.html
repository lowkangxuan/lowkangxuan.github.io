<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Developing a Duplicate Special Tool in Unity">
    <meta name="author" content="Kang Xuan">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”§</text></svg>">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <title>Developing a Duplicate Special Tool in Unity</title>

    <link rel="stylesheet" href="/css/prism-one-dark.css">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://kit.fontawesome.com/ee932fbf61.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body class="fade-in">
    
<nav class="navbar navbar-expand-sm navbar-light bg-light sticky-top px-4 fw-bold">
    <div class="container">
        <a href="/" class="navbar-brand">Kang Xuan</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse flex-grow-0" id="navbarNavAltMarkup">
        <div class="navbar-nav">
            <a href="/" class="nav-link px-3" aria-label="Home">Home</a>
            <a href="/projects" class="nav-link px-3 active" aria-label="Projects">Projects</a>
            <a href="/contact" class="nav-link px-3" aria-label="Contact Me">Contact</a>
        </div>
        </div>
    </div>
</nav>

<div class="container px-4">
    <div class="main ff-firacode">
        <div class="d-flex flex-column align-items-center mb-5 pt-5">
    <h1 class="project-title text-center pt-4 pb-3">Developing a Duplicate Special Tool in Unity</h1>
    <div class="d-flex gap-1 justify-content-between pt-0">
        <span class="tag tag-2021"><a href="/tags/2021/">2021</a></span><span class="tag tag-programming"><a href="/tags/programming/">programming</a></span><span class="tag tag-tools"><a href="/tags/tools/">tools</a></span>
    </div>
</div>
<div class="toc" >
        <ul><li><a href="#introduction">Introduction</a><ul><li><a href="#what-is-duplicate-special">What is Duplicate Special</a></li></ul></li><li><a href="#features">Features</a></li><li><a href="#development-process">Development Process</a><ul><li><a href="#initialization">Initialization</a></li><li><a href="#variables">Variables</a></li><li><a href="#opening-and-closing-window">Opening and Closing window</a></li><li><a href="#calculating-position">Calculating Position</a></li><li><a href="#scene-view-gui">Scene View GUI</a></li><li><a href="#editor-window-gui">Editor Window GUI</a></li><li><a href="#duplicating-the-object">Duplicating the object</a></li></ul></li><li><a href="#todo">Todo</a></li><li><a href="#additional-resources">Additional Resources</a></li></ul>
      </div>
<h2 id="introduction" tabindex="-1">Introduction</h2>
<p>For every school project I was assigned to, getting my hands on Maya and Unity is mandatory. My typical workflow is as follows â€” modeling and arranging my models in Maya to fit my liking before building the environment in Unity.</p>
<p>Because of how I am always going back and forth between Maya and Unity, I would often find myself lacking a tool when building my environment in Unity that I use a lot in Maya, the <a href="https://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2018/ENU/Maya-Basics/files/GUID-961B262B-F882-452C-B6A9-1B7F3AD8E0FE-htm.html">Duplicate Special Tool</a>.</p>
<h3 id="what-is-duplicate-special" tabindex="-1">What is Duplicate Special</h3>
<p>In a nutshell, Duplicate Special is a tool where users can input any numeric values for <mark>Translate</mark>, <mark>Rotate</mark>, <mark>Scale</mark>, and <mark>No. of Instances</mark>. Clicking the &quot;Apply&quot; button would duplicate the selected object(s) x amount of times based on the &quot;No. of copies&quot; input with incremental translation, rotation, and scale.</p>
<p>For example, a selected object with a translation of (2, 0, 0) and an input of <code>Translate: (3, 0, 0)</code> and <code>No. of Instances: 3</code>, clicking &quot;Apply&quot; would duplicate the object 3 times with 3 different translation, (5, 0, 0), (8, 0, 0), and (11, 0, 0).</p>
<h2 id="features" tabindex="-1">Features</h2>
<ul>
<li>Easy to use</li>
<li>Support for all 3 Transforms: <code>Position</code>, <code>Rotation</code>, <code>Scale</code></li>
<li>Displays holographic mesh if the selected gameObject has a mesh</li>
</ul>
<h2 id="development-process" tabindex="-1">Development Process</h2>
<p>The starting development process of this tool took me about over a week to complete, with additional features taking about 2 more weeks or so.</p>
<h3 id="initialization" tabindex="-1">Initialization</h3>
<p>I first included the namespace <code>UnityEditor</code> and inherited my script from <code>EditorWindow</code> instead of the default <code>MonoBehaviour</code>.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><br><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><br><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span><br><span class="token keyword">using</span> <span class="token namespace">UnityEditor</span><span class="token punctuation">;</span><br><br><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DuplicateSpecial</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EditorWindow</span></span><br><span class="token punctuation">{</span><br><br><span class="token punctuation">}</span></code></pre>
<p>I then wrote the following code to create a <mark>MenuItem</mark> under &quot;Tools &gt; Duplicate Special&quot; which will create and display a window when clicked if there isn't an existing window already.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Tools/Duplicate Special %#D"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token generic-method"><span class="token function">GetWindow</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SpecialDuplicate<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="variables" tabindex="-1">Variables</h3>
<p>Next, I created a bunch of variables that would be used later on for creating input field for users to key in values.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token class-name">GameObject</span> parent<span class="token punctuation">;</span><br><span class="token keyword">private</span> <span class="token class-name">Material</span> _previewMaterial<span class="token punctuation">;</span><br><br><span class="token comment">// Default values for Transform</span><br><span class="token keyword">public</span> <span class="token class-name">Vector3</span> inputPosition<span class="token punctuation">;</span><br><span class="token keyword">public</span> <span class="token class-name">Vector3</span> inputRotation<span class="token punctuation">;</span><br><span class="token keyword">public</span> <span class="token class-name">Vector3</span> inputScale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> inputInstances<span class="token punctuation">;</span><br><br><span class="token comment">// Serializing Stuff</span><br><span class="token class-name">SerializedObject</span> _so<span class="token punctuation">;</span><br><span class="token class-name">SerializedProperty</span> _propParent<span class="token punctuation">;</span><br><span class="token class-name">SerializedProperty</span> _propPosition<span class="token punctuation">;</span><br><span class="token class-name">SerializedProperty</span> _propRotation<span class="token punctuation">;</span><br><span class="token class-name">SerializedProperty</span> _propScale<span class="token punctuation">;</span><br><span class="token class-name">SerializedProperty</span> _propInstances<span class="token punctuation">;</span></code></pre>
<p>The classes <code>SerializedObject</code> and <code>SerializedProperty</code> you see automatically handle dirtying individual serialized fields so they will be processed by the <a href="https://docs.unity3d.com/ScriptReference/Undo.html">Undo</a> system and styled correctly for Prefab overrides when drawn in the Inspector.</p>
<h3 id="opening-and-closing-window" tabindex="-1">Opening and Closing window</h3>
<p>I made use of the <code>OnEnable()</code> and <code>OnDisable()</code> functions to initialize or uninitialize certain stuff when the window is opened or closed.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// When window is opened</span><br><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    Selection<span class="token punctuation">.</span>selectionChanged <span class="token operator">+=</span> Repaint<span class="token punctuation">;</span><br>    SceneView<span class="token punctuation">.</span>duringSceneGui <span class="token operator">+=</span> DuringSceneGUI<span class="token punctuation">;</span><br><br>    _previewMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Material</span><span class="token punctuation">(</span>Shader<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token string">"Shader Graphs/PreviewMatShader"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    _so <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SerializedObject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    _propParent <span class="token operator">=</span> _so<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">"parent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    _propPosition <span class="token operator">=</span> _so<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">"inputPosition"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    _propRotation <span class="token operator">=</span> _so<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">"inputRotation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    _propScale <span class="token operator">=</span> _so<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">"inputScale"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    _propInstances <span class="token operator">=</span> _so<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">"inputInstances"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// When window is closed</span><br><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    Selection<span class="token punctuation">.</span>selectionChanged <span class="token operator">-=</span> Repaint<span class="token punctuation">;</span><br>    SceneView<span class="token punctuation">.</span>duringSceneGui <span class="token operator">-=</span> DuringSceneGUI<span class="token punctuation">;</span><br><br>    <span class="token function">DestroyImmediate</span><span class="token punctuation">(</span>_previewMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="calculating-position" tabindex="-1">Calculating Position</h3>
<p>The function <code>CalculatePosition()</code> was created to help calculate the position that I need for each duplicated gameObject.</p>
<p>The overload function I created is for the hologram mesh that will be drawn on the Scene View based on the input field values. More on that below.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Calculate final position value based on x, y, z input parameter</span><br><span class="token keyword">private</span> <span class="token return-type class-name">Vector3</span> <span class="token function">CalculatePosition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> xPos<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> yPos<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> zPos<span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>inputPosition<span class="token punctuation">.</span>x <span class="token operator">+</span> xPos<span class="token punctuation">,</span> inputPosition<span class="token punctuation">.</span>y <span class="token operator">+</span> yPos<span class="token punctuation">,</span> inputPosition<span class="token punctuation">.</span>z <span class="token operator">+</span> zPos<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// (Overload) Calculate final position value based on x, y, z input parameter multiplied by index</span><br><span class="token keyword">private</span> <span class="token return-type class-name">Vector3</span> <span class="token function">CalculatePosition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> xPos<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> yPos<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> zPos<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token punctuation">(</span>inputPosition<span class="token punctuation">.</span>x <span class="token operator">*</span> index<span class="token punctuation">)</span> <span class="token operator">+</span> xPos<span class="token punctuation">,</span> <span class="token punctuation">(</span>inputPosition<span class="token punctuation">.</span>y <span class="token operator">*</span> index<span class="token punctuation">)</span> <span class="token operator">+</span> yPos<span class="token punctuation">,</span> <span class="token punctuation">(</span>inputPosition<span class="token punctuation">.</span>z <span class="token operator">*</span> index<span class="token punctuation">)</span> <span class="token operator">+</span> zPos<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="scene-view-gui" tabindex="-1">Scene View GUI</h3>
<p>I created a <code>DuringSceneGUI()</code> function which takes in a <code>SceneView</code> parameter in order for me to subscribe this function to the <code>SceneView.duringSceneGui</code> event.</p>
<p>I then used the <code>CalculatePosition()</code> overload function to determine the position of the preview mesh should be displayed at. I also created 2 variables, <code>finalRotation</code> and <code>finalScale</code>, and used these 2 variables together with the calculated position to make a standard 4x4 transformation matrix. Finally, the preview mesh is drawn with the <code>Graphics.DrawMeshNow()</code> function.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Scene View GUI</span><br><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DuringSceneGUI</span><span class="token punctuation">(</span><span class="token class-name">SceneView</span> sceneView<span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>inputInstances <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><br>    <span class="token punctuation">{</span><br>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">GameObject</span> go <span class="token keyword">in</span> Selection<span class="token punctuation">.</span>gameObjects<span class="token punctuation">)</span><br>        <span class="token punctuation">{</span><br>            <span class="token class-name">MeshFilter</span> meshFilter <span class="token operator">=</span> go<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MeshFilter<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>meshFilter <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><br>            <span class="token punctuation">{</span><br>                <span class="token class-name">Mesh</span> mesh <span class="token operator">=</span> meshFilter<span class="token punctuation">.</span>sharedMesh<span class="token punctuation">;</span><br><br>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> inputInstances<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><br>                <span class="token punctuation">{</span><br>                    <span class="token class-name">Vector3</span> finalPosition <span class="token operator">=</span> <span class="token function">CalculatePosition</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> go<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> go<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>                    <span class="token class-name"><span class="token keyword">float</span></span> rotationX <span class="token operator">=</span> <span class="token punctuation">(</span>go<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localRotation<span class="token punctuation">.</span>eulerAngles<span class="token punctuation">.</span>x <span class="token operator">+</span> inputRotation<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> i<span class="token punctuation">;</span><br>                    <span class="token class-name"><span class="token keyword">float</span></span> rotationY <span class="token operator">=</span> <span class="token punctuation">(</span>go<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localRotation<span class="token punctuation">.</span>eulerAngles<span class="token punctuation">.</span>y <span class="token operator">+</span> inputRotation<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">*</span> i<span class="token punctuation">;</span><br>                    <span class="token class-name"><span class="token keyword">float</span></span> rotationZ <span class="token operator">=</span> <span class="token punctuation">(</span>go<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localRotation<span class="token punctuation">.</span>eulerAngles<span class="token punctuation">.</span>z <span class="token operator">+</span> inputRotation<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">*</span> i<span class="token punctuation">;</span><br>                    <span class="token class-name">Vector3</span> finalRotation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>rotationX<span class="token punctuation">,</span> rotationY<span class="token punctuation">,</span> rotationZ<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>                    <span class="token class-name"><span class="token keyword">float</span></span> scaleX <span class="token operator">=</span> inputScale<span class="token punctuation">.</span>x<span class="token punctuation">;</span><br>                    <span class="token class-name"><span class="token keyword">float</span></span> scaleY <span class="token operator">=</span> inputScale<span class="token punctuation">.</span>y<span class="token punctuation">;</span><br>                    <span class="token class-name"><span class="token keyword">float</span></span> scaleZ <span class="token operator">=</span> inputScale<span class="token punctuation">.</span>z<span class="token punctuation">;</span><br>                    <span class="token class-name">Vector3</span> finalScale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span> scaleY<span class="token punctuation">,</span> scaleZ<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>                    <span class="token class-name">Matrix4x4</span> matrix <span class="token operator">=</span> Matrix4x4<span class="token punctuation">.</span><span class="token function">TRS</span><span class="token punctuation">(</span>finalPosition<span class="token punctuation">,</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span>finalRotation<span class="token punctuation">)</span><span class="token punctuation">,</span> finalScale<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>                    _previewMaterial<span class="token punctuation">.</span><span class="token function">SetPass</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    Graphics<span class="token punctuation">.</span><span class="token function">DrawMeshNow</span><span class="token punctuation">(</span>mesh<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="editor-window-gui" tabindex="-1">Editor Window GUI</h3>
<p>The <a href="https://docs.unity3d.com/ScriptReference/EditorWindow.OnGUI.html">OnGUI()</a> function is used to implement the GUI for the Editor Window such as the property field and <mark>Duplicate</mark> button.</p>
<p><code>SceneView.RepainAll()</code> is used to repaint the Scene View the moment a property field is modified. This ensures that the Scene View refreshes properly without any stuttering.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Editor Window GUI</span><br><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    _so<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>_propParent<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">"Parent"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <br>    EditorGUILayout<span class="token punctuation">.</span><span class="token function">Space</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>_propPosition<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">"Position"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>_propRotation<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">"Rotation"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>_propScale<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">"Scale"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>_propInstances<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">"No. of Instances"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    EditorGUILayout<span class="token punctuation">.</span><span class="token function">Space</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <br>    <span class="token comment">// If properties are modified, repaint SceneView</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_so<span class="token punctuation">.</span><span class="token function">ApplyModifiedProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">{</span><br>        SceneView<span class="token punctuation">.</span><span class="token function">RepaintAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <br>    <span class="token comment">// If only ONE gameObject is selected and No. of Instances input is greater than ZERO, enable button</span><br>    <span class="token comment">// else disable button</span><br>    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">EditorGUI<span class="token punctuation">.</span>DisabledScope</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Selection<span class="token punctuation">.</span>gameObjects<span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>inputInstances <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"Duplicate"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">{</span><br>            <span class="token function">DuplicateObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="duplicating-the-object" tabindex="-1">Duplicating the object</h3>
<p>Finally, the function for duplicating the selected gameObject when the button is clicked. By iterating through the <code>inputInstances</code> variable, I can quickly duplicate the gameObject by using <code>Unsupported.DuplicateGameObjectsUsingPasteboard()</code>, which is a similar function used for your typical duplicate (<code>Edit &gt; Duplicate</code>).</p>
<p>The position, rotation and scale of the duplicated object are then calculated based on their respective input field values, and as for the position, the <code>CalculatePosition()</code> function is used.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Function to duplicate selected objects</span><br><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DuplicateObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> inputInstances<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><br>    <span class="token punctuation">{</span><br>        Unsupported<span class="token punctuation">.</span><span class="token function">DuplicateGameObjectsUsingPasteboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        <span class="token comment">// Current duplicated object</span><br>        <span class="token class-name">Transform</span> currSelection <span class="token operator">=</span> Selection<span class="token punctuation">.</span>activeGameObject<span class="token punctuation">.</span>transform<span class="token punctuation">;</span><br><br>        <span class="token comment">// Assigning scale to instantiated object</span><br>        <span class="token class-name"><span class="token keyword">float</span></span> scaleX <span class="token operator">=</span> inputScale<span class="token punctuation">.</span>x<span class="token punctuation">;</span><br>        <span class="token class-name"><span class="token keyword">float</span></span> scaleY <span class="token operator">=</span> inputScale<span class="token punctuation">.</span>y<span class="token punctuation">;</span><br>        <span class="token class-name"><span class="token keyword">float</span></span> scaleZ <span class="token operator">=</span> inputScale<span class="token punctuation">.</span>z<span class="token punctuation">;</span><br><br>        currSelection<span class="token punctuation">.</span>localPosition <span class="token operator">=</span> <span class="token function">CalculatePosition</span><span class="token punctuation">(</span>currSelection<span class="token punctuation">.</span>localPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span> currSelection<span class="token punctuation">.</span>localPosition<span class="token punctuation">.</span>y<span class="token punctuation">,</span> currSelection<span class="token punctuation">.</span>localPosition<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        currSelection<span class="token punctuation">.</span><span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>inputRotation<span class="token punctuation">.</span>x<span class="token punctuation">,</span> inputRotation<span class="token punctuation">.</span>y<span class="token punctuation">,</span> inputRotation<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        currSelection<span class="token punctuation">.</span>localScale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span> scaleY<span class="token punctuation">,</span> scaleZ<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="todo" tabindex="-1">Todo</h2>
<p>With the tool itself still being early in development, there are list of potential features that I may implement into the tool itself in the future, who knows</p>
<ul>
<li>Support for multiple object duplication</li>
<li>Display preview mesh for selected object that has the <code>MeshRenderer</code> component in the child object(s) instead</li>
</ul>
<h2 id="additional-resources" tabindex="-1">Additional Resources</h2>
<p><a href="https://docs.unity3d.com/ScriptReference/EditorWindow.html">Unity EditorWindow class</a></p>
<p><a href="https://docs.unity3d.com/ScriptReference/SerializedObject.html">Unity SerializedObject class</a></p>
<p><a href="https://youtu.be/pZ45O2hg_30">Freya HolmÃ©r Intro to Tool Dev in Unity</a></p>

<footer class="project-footer ff-roboto">December 29, 2021</footer>
        <footer class="d-flex justify-content-center gap-4">
            <a href="mailto: lowkangxuan@gmail.com" target="_blank">
                <i class="fa-solid fa-envelope fa-lg"></i>
            </a>
            <a href="https://twitter.com/k4ngg_" target="_blank">
                <i class="fa-brands fa-twitter fa-lg"></i>
            </a>
            <a href="https://github.com/lowkangxuan" target="_blank">
                <i class="fa-brands fa-github fa-lg"></i>
            </a>
            <a href="https://www.linkedin.com/in/low-kang-xuan-0305061a9/" target="_blank">
                <i class="fa-brands fa-linkedin fa-lg"></i>
            </a>
        </footer>
    </div>
</div>
</body>
</html>